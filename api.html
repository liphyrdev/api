<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>LOL GUARD API</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #0a0a1a;
            color: white;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        #content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding-top: 50px;
        }
        h1 { color: #ff0000; font-size: 2.5rem; margin-bottom: 20px; }
        .code { 
            background: #000; 
            color: #00ff88; 
            padding: 15px; 
            border-radius: 10px; 
            margin: 20px 0;
            font-family: monospace;
            border: 2px solid #00ff88;
        }
    </style>
    <script>
        async function main() {
            const urlParams = new URLSearchParams(window.location.search);
            const scriptId = urlParams.get('id');
            
            if (!scriptId) {
                document.getElementById('content').innerHTML = `
                    <h1>LOL GUARD API</h1>
                    <p style="color: #ff9900;">‚ùå Forne√ßa um ID: ?id=SEU_ID</p>
                `;
                return;
            }
            
            // URL CORRETA do seu Firebase
            const firebaseUrl = `https://api-lol-guard-2f615-default-rtdb.firebaseio.com/scripts/${scriptId}.json`;
            
            try {
                console.log("Buscando:", firebaseUrl);
                const response = await fetch(firebaseUrl);
                
                if (!response.ok) {
                    showError(`HTTP ${response.status}: Script n√£o encontrado`);
                    return;
                }
                
                const data = await response.json();
                console.log("Dados recebidos:", data);
                
                if (!data || !data.content) {
                    showError("Script sem conte√∫do");
                    return;
                }
                
                // DETECTAR ROBLOX (simples)
                const isRoblox = window.location.search.includes('roblox=true') || 
                               /Roblox|HttpService/i.test(navigator.userAgent);
                
                if (isRoblox) {
                    // PARA ROBLOX: apenas o script puro
                    document.body.innerHTML = '';
                    document.body.textContent = data.content;
                } else {
                    // PARA NAVEGADOR: p√°gina protegida
                    showProtectedPage(scriptId, data.name, data.content);
                }
                
            } catch (error) {
                console.error("Erro:", error);
                showError(`Erro de conex√£o: ${error.message}`);
            }
        }
        
        function showProtectedPage(id, name, content) {
            document.getElementById('content').innerHTML = `
                <h1>üîí SCRIPT PROTEGIDO POR LOL GUARD</h1>
                <p>‚úÖ Script encontrado: <strong>${name || id}</strong></p>
                <p>üìè Tamanho: ${content.length} caracteres</p>
                
                <div class="code">
                    <p>Para executar no Roblox:</p>
                    <code>loadstring(game:HttpGet("${window.location.href}"))()</code>
                </div>
                
                <p style="color: #888; margin-top: 30px;">
                    Sistema LOL GUARD v2.0 | Firebase conectado
                </p>
            `;
        }
        
        function showError(msg) {
            document.getElementById('content').innerHTML = `
                <h1>LOL GUARD API</h1>
                <p style="color: #ff5555;">‚ùå ${msg}</p>
                <p style="color: #aaa;">ID: ${new URLSearchParams(window.location.search).get('id') || 'Nenhum'}</p>
            `;
        }
        
        // Executar quando carregar
        window.onload = main;
    </script>
</head>
<body>
    <div id="content">
        <h1>LOL GUARD</h1>
        <p>Carregando sistema...</p>
    </div>
</body>
</html>
