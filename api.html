<!DOCTYPE html>
<html>
<head>
    <!-- REMOVIDO Firebase SDK - N√ÉO √â NECESS√ÅRIO -->
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        body { 
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        .container { 
            max-width: 800px; 
            width: 100%;
        }
        
        .protected-view {
            background: rgba(0, 0, 0, 0.6);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid #ff0000;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.3);
        }
        
        .protected-view h1 {
            color: #ff0000;
            font-size: 2.8rem;
            margin-bottom: 20px;
            text-shadow: 0 0 15px #ff0000;
        }
        
        .loader-code {
            background: rgba(0, 0, 0, 0.7);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            color: #00ff88;
            border: 2px solid #00ff88;
            font-family: 'Courier New', monospace;
        }
        
        code {
            display: block;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 1.1rem;
            color: #00ff88;
            word-break: break-all;
            border: 1px solid #00aa55;
        }
        
        .status {
            color: #ff9900;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .footer {
            color: #888;
            margin-top: 30px;
            font-size: 0.9rem;
        }
        
        .badge {
            display: inline-block;
            background: rgba(255, 0, 0, 0.2);
            color: #ff5555;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 10px 5px;
            border: 1px solid #ff5555;
        }
    </style>
    <script>
        // FUN√á√ÉO SIMPLES para detectar Roblox
        function isRobloxRequest() {
            // Para TESTES: adicione ?roblox=true na URL
            return window.location.search.includes('roblox=true') ||
                   navigator.userAgent.includes('Roblox');
        }
        
        // BUSCAR SCRIPT - M√âTODO DIRETO SEM FIREBASE SDK
        async function getScript() {
            const urlParams = new URLSearchParams(window.location.search);
            const scriptId = urlParams.get('id');
            
            // Se n√£o tem ID, mostra p√°gina protegida
            if (!scriptId) {
                showProtectedPage("üîç Nenhum ID de script fornecido");
                return;
            }
            
            // URL DIRETA do seu Firebase (MESMA que seu site principal usa)
            const firebaseUrl = `https://api-lol-guard-2f615-default-rtdb.firebaseio.com/scripts/${scriptId}.json`;
            
            // SE FOR ROBLOX ‚Üí Busca o script
            if (isRobloxRequest()) {
                try {
                    const response = await fetch(firebaseUrl);
                    if (!response.ok) {
                        // Se erro, retorna script de erro para Roblox
                        document.body.textContent = 'print("ERRO: Script n√£o encontrado no Firebase")';
                        return;
                    }
                    
                    const scriptData = await response.json();
                    
                    if (scriptData && scriptData.content) {
                        // Retorna APENAS o conte√∫do do script para Roblox
                        document.body.textContent = scriptData.content;
                    } else {
                        document.body.textContent = 'print("ERRO: Script sem conte√∫do")';
                    }
                } catch (error) {
                    document.body.textContent = 'print("ERRO: Falha na conex√£o com Firebase")';
                }
            } 
            // SE FOR NAVEGADOR ‚Üí Mostra p√°gina protegida
            else {
                try {
                    const response = await fetch(firebaseUrl);
                    let message = `Script ID: ${scriptId}`;
                    let scriptLength = 0;
                    
                    if (response.ok) {
                        const scriptData = await response.json();
                        if (scriptData && scriptData.content) {
                            scriptLength = scriptData.content.length;
                            message = `‚úÖ Script encontrado: ${scriptData.name || scriptId}`;
                        }
                    }
                    
                    showProtectedPage(message, scriptLength);
                } catch (error) {
                    showProtectedPage("‚ö†Ô∏è Firebase temporariamente indispon√≠vel");
                }
            }
        }
        
        // MOSTRAR P√ÅGINA PROTEGIDA (para navegadores)
        function showProtectedPage(message = '', scriptLength = 0) {
            const currentUrl = window.location.href;
            
            document.body.innerHTML = `
                <div class="container">
                    <div class="protected-view">
                        <h1>üõ°Ô∏è SCRIPT PROTEGIDO POR LOL GUARD</h1>
                        <p style="font-size: 1.2rem; margin-bottom: 10px;">
                            Sistema de Prote√ß√£o Anti-C√≥pia
                        </p>
                        
                        <div style="margin: 20px 0;">
                            <span class="badge"><i class="fas fa-lock"></i> Protegido</span>
                            <span class="badge"><i class="fas fa-database"></i> Firebase</span>
                            <span class="badge"><i class="fas fa-shield-alt"></i> LOL GUARD v2.0</span>
                        </div>
                        
                        ${message ? `<div class="status">${message}</div>` : ''}
                        
                        ${scriptLength > 0 ? `
                            <div style="color: #00ccff; margin: 15px 0;">
                                üìè Tamanho do script: ${scriptLength} caracteres
                            </div>
                        ` : ''}
                        
                        <div class="loader-code">
                            <p style="margin-bottom: 15px; font-size: 1.1rem;">
                                <i class="fas fa-code"></i> Para executar no Roblox:
                            </p>
                            <code>loadstring(game:HttpGet("${currentUrl}"))()</code>
                            <p style="margin-top: 15px; color: #aaa; font-size: 0.9rem;">
                                Cole este c√≥digo em qualquer executor compat√≠vel
                            </p>
                        </div>
                        
                        <div class="footer">
                            <p>API Intermedi√°ria LOL GUARD | Acesso direto bloqueado</p>
                            <p style="color: #666; font-size: 0.8rem; margin-top: 5px;">
                                Script ID: ${new URLSearchParams(window.location.search).get('id') || 'Nenhum'}
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // EXECUTAR QUANDO CARREGAR
        window.onload = function() {
            // Primeiro mostra "carregando" rapidamente
            document.body.innerHTML = `
                <div class="container">
                    <div class="protected-view">
                        <h2>LOL GUARD API</h2>
                        <p>Inicializando sistema de prote√ß√£o...</p>
                    </div>
                </div>
            `;
            
            // Depois executa a l√≥gica principal
            setTimeout(() => getScript(), 100);
        };
    </script>
    
    <!-- Adicionando Font Awesome para √≠cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Conte√∫do ser√° carregado dinamicamente -->
</body>
</html>
